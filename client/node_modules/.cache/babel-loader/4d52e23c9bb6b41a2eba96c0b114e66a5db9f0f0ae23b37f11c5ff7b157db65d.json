{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';const initialState={items:[],loading:false,error:null};// Async thunks\nexport const fetchWishlist=createAsyncThunk('wishlist/fetchWishlist',async(_,_ref)=>{let{rejectWithValue}=_ref;try{const token=localStorage.getItem('token');const response=await axios.get('/api/users/wishlist',{headers:{Authorization:\"Bearer \".concat(token)}});return response.data.wishlist;}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to fetch wishlist');}});export const addToWishlist=createAsyncThunk('wishlist/addToWishlist',async(productId,_ref2)=>{let{rejectWithValue}=_ref2;try{const token=localStorage.getItem('token');const response=await axios.post(\"/api/users/wishlist/\".concat(productId),{},{headers:{Authorization:\"Bearer \".concat(token)}});return response.data;}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to add to wishlist');}});export const removeFromWishlist=createAsyncThunk('wishlist/removeFromWishlist',async(productId,_ref3)=>{let{rejectWithValue}=_ref3;try{const token=localStorage.getItem('token');const response=await axios.delete(\"/api/users/wishlist/\".concat(productId),{headers:{Authorization:\"Bearer \".concat(token)}});return{productId,message:response.data.message};}catch(error){var _error$response3,_error$response3$data;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to remove from wishlist');}});const wishlistSlice=createSlice({name:'wishlist',initialState,reducers:{clearError:state=>{state.error=null;},clearWishlist:state=>{state.items=[];}},extraReducers:builder=>{builder// Fetch Wishlist\n.addCase(fetchWishlist.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchWishlist.fulfilled,(state,action)=>{state.loading=false;state.items=action.payload;state.error=null;}).addCase(fetchWishlist.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// Add to Wishlist\n.addCase(addToWishlist.pending,state=>{state.loading=true;state.error=null;}).addCase(addToWishlist.fulfilled,(state,action)=>{state.loading=false;state.error=null;// The product will be added to the wishlist on the server\n// We'll need to refetch the wishlist to get the updated list\n}).addCase(addToWishlist.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// Remove from Wishlist\n.addCase(removeFromWishlist.pending,state=>{state.loading=true;state.error=null;}).addCase(removeFromWishlist.fulfilled,(state,action)=>{state.loading=false;state.items=state.items.filter(item=>item._id!==action.payload.productId);state.error=null;}).addCase(removeFromWishlist.rejected,(state,action)=>{state.loading=false;state.error=action.payload;});}});export const{clearError,clearWishlist}=wishlistSlice.actions;export default wishlistSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","items","loading","error","fetchWishlist","_","_ref","rejectWithValue","token","localStorage","getItem","response","get","headers","Authorization","concat","data","wishlist","_error$response","_error$response$data","message","addToWishlist","productId","_ref2","post","_error$response2","_error$response2$data","removeFromWishlist","_ref3","delete","_error$response3","_error$response3$data","wishlistSlice","name","reducers","clearError","state","clearWishlist","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","filter","item","_id","actions","reducer"],"sources":["/Users/adityapandey/Desktop/HarshKumar/client/src/store/slices/wishlistSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst initialState = {\n  items: [],\n  loading: false,\n  error: null,\n};\n\n// Async thunks\nexport const fetchWishlist = createAsyncThunk(\n  'wishlist/fetchWishlist',\n  async (_, { rejectWithValue }) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/users/wishlist', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data.wishlist;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Failed to fetch wishlist');\n    }\n  }\n);\n\nexport const addToWishlist = createAsyncThunk(\n  'wishlist/addToWishlist',\n  async (productId, { rejectWithValue }) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(`/api/users/wishlist/${productId}`, {}, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Failed to add to wishlist');\n    }\n  }\n);\n\nexport const removeFromWishlist = createAsyncThunk(\n  'wishlist/removeFromWishlist',\n  async (productId, { rejectWithValue }) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.delete(`/api/users/wishlist/${productId}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return { productId, message: response.data.message };\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Failed to remove from wishlist');\n    }\n  }\n);\n\nconst wishlistSlice = createSlice({\n  name: 'wishlist',\n  initialState,\n  reducers: {\n    clearError: (state) => {\n      state.error = null;\n    },\n    clearWishlist: (state) => {\n      state.items = [];\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Fetch Wishlist\n      .addCase(fetchWishlist.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchWishlist.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = action.payload;\n        state.error = null;\n      })\n      .addCase(fetchWishlist.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n      // Add to Wishlist\n      .addCase(addToWishlist.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(addToWishlist.fulfilled, (state, action) => {\n        state.loading = false;\n        state.error = null;\n        // The product will be added to the wishlist on the server\n        // We'll need to refetch the wishlist to get the updated list\n      })\n      .addCase(addToWishlist.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n      // Remove from Wishlist\n      .addCase(removeFromWishlist.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(removeFromWishlist.fulfilled, (state, action) => {\n        state.loading = false;\n        state.items = state.items.filter(item => item._id !== action.payload.productId);\n        state.error = null;\n      })\n      .addCase(removeFromWishlist.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { clearError, clearWishlist } = wishlistSlice.actions;\nexport default wishlistSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}